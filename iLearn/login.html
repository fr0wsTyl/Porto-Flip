<!doctype html>

<head>
    <meta charset="utf-8">
    <title>iLearn | Login page</title>
    <meta name="description" content="learning system">
    <meta name="viewport" content="width=device-width">
    <link rel="stylesheet" href="css/bootstrap/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap/bootflat.min.css">
    <link rel="stylesheet" href="css/style.css">
</head>

<body>
    <div id="wrapper" class="container-fluid">
        <div class="row">
            <div id="main" class="text-center col-md-6 col-md-offset-3">
                <div class="panel panel-primary">
                    <div class="panel-heading">
                        <h3 class="panel-title">Login</h3>
                    </div>
                    <div class="panel-body">
                        <input type="text" id="username-login-value" class="form-control" placeholder="Enter username">
                        <input type="password" id="password-login-value" class="form-control" placeholder="Enter password">
                        <button id="sign-in-button" class="btn btn-primary">Sign in</button>
                        <div>Don't have an account? Create your own from <a href="register.html">here</a></div>
                    </div>
                </div>
            </div>
        </div>
        <script type="text/javascript" src="scripts/libs/jquery-2.1.4.min.js"></script>
        <script type="text/javascript" src="http://www.parsecdn.com/js/parse-1.5.0.min.js"></script>
        <script type="text/javascript">
            Parse.initialize("OxNzrzXTEVzRxH9qHpel84j4dD8QJs4aFUbmrWYc", "BkkvpNtIeTo6urCE4WzLnFP3M4SaONZ2rzO6MP4r");

    // $('#register-btn').on('click', function() {
    //     var usernameValue = $('#username-value').val();
    //     var TestObject = Parse.Object.extend("User");
    //     var testObject = new TestObject();
    //     testObject.save({
    //         username: usernameValue,
    //         password: "pass",
    //         ID: "234567asd8"
    //     }, {
    //         success: function(object) {
    //             $(".success").show();
    //         },
    //         error: function(model, error) {
    //             $(".error").show();
    //         }
    //     });
    // })

    $('#sign-in-button').on('click', function() {
        var $usernameValue = $('#username-login-value').val();
        var $passwordValue = $('#password-login-value').val();

        Parse.User.logIn($usernameValue, $passwordValue, {
            success: function(user) {
                $('#main').html('');
                $('#main').load('content/success-user-login-message.html');
                setTimeout(function() {
                    document.location.href = 'profile.html';
                }, 1200);
            },
            error: function(user, error) {
                
            }
        });


        // // query.equalTo('User', {
        // //     'username': $usernameValue
        // // });
        // //query.equalTo('username', $usernameValue);

        // Parse.User.logIn($usernameValue, $passwordValue, {
        //     success: function(user) {
        //         // body...
        //     },
        //     error: function(user,err) {
        //         console.log(err);
        //     }
        // })

        // query.equalTo('ID', '2345678');
        // query.find({
        //     success: function(results) {
        //         console.log(results);
        //         if (results.length === 0) {
        //             alert('Invalid username or password');
        //         } else {
        //             alert('You are logged in now');
        //         }
        //     },
        //     error: function(error) {
        //         alert('something happened');
        //     }
        // });
    })
        </script>
</body>

</html>